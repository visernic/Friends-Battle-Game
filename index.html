<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>Friends Battle Game </title>
    <meta name="description" content="Create viral battle videos with realistic spinning physics.">
    
    <!-- Favicons & Meta -->
    <link rel="icon" type="image/png" href="https://i.postimg.cc/Qdb0JN9X/logo.png">
    <link rel="apple-touch-icon" href="https://i.postimg.cc/Qdb0JN9X/logo.png">
    
    <!-- Third Party Libraries (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Hind+Siliguri:wght@400;600;700&family=Roboto:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS Architecture -->
    <link rel="stylesheet" href="./assets/css/main.css">
</head>
<body class="min-h-screen flex flex-col justify-between">

    <!-- Header -->
    <header class="w-full py-4 px-4 md:px-6 flex justify-between items-center glass sticky top-0 z-50">
        <h1 class="text-xl md:text-3xl font-['Bangers'] tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500" style="text-shadow: 0 0 15px rgba(255,0,222,0.6);">
            BATTLE MAKER
        </h1>
        <button onclick="navigator.clipboard.writeText(window.location.href); alert('Link Copied!')" class="flex items-center gap-2 bg-gray-800 hover:bg-gray-700 text-green-400 px-3 py-1.5 md:px-4 md:py-2 text-xs md:text-sm rounded-full font-bold border border-green-500/30 transition-all active:scale-95">
            <i class="fa-solid fa-share-nodes"></i> <span class="md:inline">Share</span>
        </button>
    </header>

    <!-- Main Content -->
    <main class="flex-grow w-full max-w-7xl mx-auto p-3 md:p-8 grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8 items-start">
        
        <!-- Controls Section -->
        <div class="order-2 lg:order-1 flex flex-col gap-6 w-full">
            <div class="glass p-4 md:p-6 rounded-3xl">
                <div class="flex items-center gap-3 mb-6 border-b border-gray-700 pb-4">
                    <i class="fa-solid fa-gamepad text-green-400 text-xl"></i>
                    <h2 class="text-lg md:text-xl font-bold text-white">Setup Fighters</h2>
                </div>

                <!-- Player 1 Input -->
                <div class="bg-gray-900/60 p-3 md:p-4 rounded-xl border border-red-500/30 mb-4 hover:border-red-500/60 transition">
                    <div class="flex justify-between items-center mb-2">
                        <label class="text-[10px] md:text-xs font-bold text-red-400 uppercase tracking-wider">Player 1 (Red)</label>
                        <i class="fa-solid fa-user-ninja text-red-500/50"></i>
                    </div>
                    <div class="flex gap-3 items-center">
                        <div id="p1-ui-preview" class="w-12 h-12 md:w-14 md:h-14 rounded-full bg-gray-800 bg-cover bg-center border-2 border-red-500 shadow-[0_0_10px_rgba(255,0,0,0.3)] shrink-0"></div>
                        <div class="w-full flex flex-col gap-2 min-w-0">
                            <input type="text" id="name1" placeholder="Name (Ex: রাকিব)" class="custom-input w-full px-3 py-2 rounded-lg text-white text-xs md:text-sm font-['Hind_Siliguri']" maxlength="15">
                            <div class="flex flex-wrap gap-2 items-center">
                                <input type="file" id="upload1" accept="image/*" class="flex-1 min-w-0 text-[10px] md:text-xs text-gray-400 file:mr-2 file:py-1 file:px-2 file:rounded-full file:border-0 file:bg-red-900 file:text-white cursor-pointer hover:file:bg-red-700 transition">
                                <div class="flex gap-2 shrink-0">
                                    <button class="social-btn tiktok-btn"><i class="fa-brands fa-tiktok"></i></button>
                                    <button class="social-btn fb-btn"><i class="fa-brands fa-facebook-f"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Player 2 Input -->
                <div class="bg-gray-900/60 p-3 md:p-4 rounded-xl border border-blue-500/30 mb-6 hover:border-blue-500/60 transition">
                    <div class="flex justify-between items-center mb-2">
                        <label class="text-[10px] md:text-xs font-bold text-blue-400 uppercase tracking-wider">Player 2 (Blue)</label>
                        <i class="fa-solid fa-user-astronaut text-blue-500/50"></i>
                    </div>
                    <div class="flex gap-3 items-center">
                        <div id="p2-ui-preview" class="w-12 h-12 md:w-14 md:h-14 rounded-full bg-gray-800 bg-cover bg-center border-2 border-blue-500 shadow-[0_0_10px_rgba(0,100,255,0.3)] shrink-0"></div>
                        <div class="w-full flex flex-col gap-2 min-w-0">
                            <input type="text" id="name2" placeholder="Name (Ex: তিশা)" class="custom-input w-full px-3 py-2 rounded-lg text-white text-xs md:text-sm font-['Hind_Siliguri']" maxlength="15">
                            <div class="flex flex-wrap gap-2 items-center">
                                <input type="file" id="upload2" accept="image/*" class="flex-1 min-w-0 text-[10px] md:text-xs text-gray-400 file:mr-2 file:py-1 file:px-2 file:rounded-full file:border-0 file:bg-blue-900 file:text-white cursor-pointer hover:file:bg-blue-700 transition">
                                <div class="flex gap-2 shrink-0">
                                    <button class="social-btn tiktok-btn"><i class="fa-brands fa-tiktok"></i></button>
                                    <button class="social-btn fb-btn"><i class="fa-brands fa-facebook-f"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Button -->
                <button id="startBtn" disabled class="w-full py-3 md:py-4 rounded-xl font-bold text-base md:text-lg uppercase tracking-wide bg-gradient-to-r from-green-500 to-emerald-600 text-black shadow-lg hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-40 disabled:cursor-not-allowed">
                    Start Battle (10 Goals)
                </button>

                <!-- Processing UI -->
                <div id="processingUI" class="hidden mt-6">
                    <div class="flex justify-between text-xs font-mono text-green-400 mb-2">
                        <span class="animate-pulse">RENDERING VIDEO...</span>
                        <span id="percentText">0%</span>
                    </div>
                    <div class="h-2 w-full bg-gray-800 rounded-full overflow-hidden">
                        <div id="progressBar" class="h-full w-0 progress-bar-anim transition-all duration-100"></div>
                    </div>
                </div>

                <!-- Result UI -->
                <div id="resultUI" class="hidden mt-6 flex gap-3 animate-fade-in">
                    <button class="flex-1 bg-gray-700 hover:bg-gray-600 text-white py-3 rounded-xl font-bold text-xs md:text-sm transition flex justify-center gap-2 items-center">
                        <i class="fa-solid fa-play"></i> Preview
                    </button>
                    <button class="flex-1 bg-gradient-to-r from-blue-500 to-indigo-600 text-white py-3 rounded-xl font-bold text-xs md:text-sm shadow-lg hover:shadow-blue-500/50 transition flex justify-center gap-2 items-center">
                        <i class="fa-solid fa-download"></i> Download MP4
                    </button>
                </div>
            </div>
            
            <div class="text-center text-[10px] md:text-xs text-gray-500 mt-2 pb-4">
                <i class="fa-solid fa-circle-info mr-1"></i> Best experience on Chrome/Android
            </div>
        </div>

        <!-- Live View Section -->
        <div class="order-1 lg:order-2 flex flex-col items-center w-full">
            <div class="flex justify-between w-full max-w-[380px] mb-2 px-2">
                <span class="text-[10px] md:text-xs font-bold text-gray-400 uppercase tracking-widest"><i class="fa-solid fa-mobile-screen mr-1"></i> Live View</span>
                <span class="text-[8px] md:text-[10px] text-green-500 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/30">HD 1080P</span>
            </div>
            
            <div class="canvas-wrapper">
                <canvas id="previewCanvas" width="540" height="960"></canvas>
                <video id="finalVideo" controls class="absolute inset-0 w-full h-full bg-black hidden z-20 object-contain"></video>
            </div>
        </div>

    </main>

    <footer class="w-full py-6 text-center border-t border-gray-800 glass mt-8">
        <p class="text-xs md:text-sm text-gray-400 font-['Orbitron']">
            Engineered By <a href="https://visernic.com" class="text-green-400 hover:text-green-300 font-bold transition-colors relative group">
                Visernic Limited
                <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-green-400 transition-all group-hover:w-full"></span>
            </a>
        </p>
    </footer>

    <!-- Modals -->
    <div id="importModal" class="fixed inset-0 bg-black/80 hidden z-[100] flex items-center justify-center p-4">
        <div class="bg-gray-900 border border-gray-700 p-6 rounded-2xl w-full max-w-sm glass">
            <h3 class="text-xl font-bold mb-4 text-white"><span id="modalPlatform">Social</span> Import</h3>
            <p class="text-xs text-gray-400 mb-4">Enter Username or URL. We will set the name.</p>
            <input type="text" id="socialUrlInput" placeholder="Paste link..." class="w-full p-3 bg-black border border-gray-600 rounded-lg text-white mb-4 custom-input">
            <div class="flex justify-end gap-3">
                <button class="px-4 py-2 text-sm text-gray-400 hover:text-white transition">Cancel</button>
                <button class="px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-bold hover:bg-green-500 transition">Import</button>
            </div>
        </div>
    </div>

    <!-- Hidden Render Canvas (For High Quality Video Export) -->
    <canvas id="renderCanvas" width="1080" height="1920" style="display:none;"></canvas>

    <!-- Main Entry Point Module -->
    <script type="module" src="./src/main.js"></script>

</body>
</html>
